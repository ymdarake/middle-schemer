# ステップ4: 関数定義と適用

## 目的

ユーザーが独自の関数を定義し、それを呼び出すことができるようにします。
`define` と `lambda` を実装します。

## 学ぶこと

- `lambda` による関数定義
- `define` による変数・関数の定義
- 関数適用の処理
- 引数の束縛（binding）

## 実装内容

以下のようなコードが評価できるようになります：

```scheme
(define add (lambda (x y) (+ x y)))
(add 3 4)  ; => 7
```

または：

```scheme
(define square (lambda (x) (* x x)))
(square 5)  ; => 25
```

## 関数適用の流れ

1. `lambda` で定義された関数を評価すると、クロージャが生成される
2. 関数適用時、引数を評価して関数に渡す
3. 関数本体を評価する際、仮引数を実引数に束縛した新しい環境を作成

## 実装のポイント

1. `lambda` 式の評価: クロージャ（関数と環境のペア）を作成
2. `define` の処理: 環境に変数や関数を追加
3. 関数適用: 新しい環境を作成して関数本体を評価

## 次のステップ

次のステップでは、クロージャとスコープのより詳細な処理を実装します。

